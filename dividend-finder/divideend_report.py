import datetime
import json

import dividend_scrapper
import ticker_scrap

dividend_infos = dividend_scrapper.get_next_30_days()
#print(dividend_infos)
#dividend_infos = [{'ex-dividend-date': '10/14/2016', 'announced-dividend-date': '09/16/2016', 'dividend': 1.0, 'ticker': 'agx', 'annual-dividend': 0.7}, {'ex-dividend-date': '10/14/2016', 'announced-dividend-date': '09/30/2016', 'dividend': 0.13, 'ticker': 'ayi', 'annual-dividend': 0.52}, {'ex-dividend-date': '10/14/2016', 'announced-dividend-date': '10/03/2016', 'dividend': 0.17, 'ticker': 'azz', 'annual-dividend': 0.68}, {'ex-dividend-date': '10/14/2016', 'announced-dividend-date': '10/10/2016', 'dividend': 0.06, 'ticker': 'civb', 'annual-dividend': 0.24}, {'ex-dividend-date': '10/14/2016', 'announced-dividend-date': '09/14/2016', 'dividend': 0.141, 'ticker': 'mxf', 'annual-dividend': 1.047}, {'ex-dividend-date': '10/17/2016', 'announced-dividend-date': '09/08/2016', 'dividend': 1.21, 'ticker': 'ghc', 'annual-dividend': 4.84}, {'ex-dividend-date': '10/17/2016', 'announced-dividend-date': '08/22/2016', 'dividend': 0.35, 'ticker': 'low', 'annual-dividend': 1.4}, {'ex-dividend-date': '10/17/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.03, 'ticker': 'pbbi', 'annual-dividend': 0.12}, {'ex-dividend-date': '10/17/2016', 'announced-dividend-date': '09/29/2016', 'dividend': 0.07, 'ticker': 'pir', 'annual-dividend': 0.28}, {'ex-dividend-date': '10/17/2016', 'announced-dividend-date': '10/03/2016', 'dividend': 0.09, 'ticker': 'srv', 'annual-dividend': 1.08}, {'ex-dividend-date': '10/17/2016', 'announced-dividend-date': '09/12/2016', 'dividend': 0.13, 'ticker': 'wst', 'annual-dividend': 0.52}, {'ex-dividend-date': '10/17/2016', 'announced-dividend-date': '09/26/2016', 'dividend': 0.51, 'ticker': 'yum', 'annual-dividend': 2.04}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.36, 'ticker': 'codi', 'annual-dividend': 1.44}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.024, 'ticker': 'cxe', 'annual-dividend': 0.298}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.04, 'ticker': 'cxh', 'annual-dividend': 0.494}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.107, 'ticker': 'gldi', 'annual-dividend': 1.611}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '08/03/2016', 'dividend': 0.115, 'ticker': 'hrzn', 'annual-dividend': 0.46}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '08/03/2016', 'dividend': 0.185, 'ticker': 'main', 'annual-dividend': 2.22}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.063, 'ticker': 'mcr', 'annual-dividend': 0.757}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.035, 'ticker': 'min', 'annual-dividend': 0.421}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.045, 'ticker': 'mmt', 'annual-dividend': 0.528}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.095, 'ticker': 'pflt', 'annual-dividend': 1.14}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '09/19/2016', 'dividend': 0.124, 'ticker': 'rnp', 'annual-dividend': 1.604}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '09/19/2016', 'dividend': 0.08, 'ticker': 'rqi', 'annual-dividend': 1.04}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.112, 'ticker': 'slvo', 'annual-dividend': 1.557}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/11/2016', 'dividend': 0.375, 'ticker': 'ssw', 'annual-dividend': 1.5}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/11/2016', 'dividend': 0.117, 'ticker': 'suns', 'annual-dividend': 1.41}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.02, 'ticker': 'taho', 'annual-dividend': 0.24}, {'ex-dividend-date': '10/18/2016', 'announced-dividend-date': '09/19/2016', 'dividend': 0.134, 'ticker': 'utf', 'annual-dividend': 1.734}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '09/29/2016', 'dividend': 1.21, 'ticker': 'acn', 'annual-dividend': 2.42}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '08/08/2016', 'dividend': 0.097, 'ticker': 'acsf', 'annual-dividend': 1.261}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/10/2016', 'dividend': 0.099, 'ticker': 'ako.a', 'annual-dividend': 0.577}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/10/2016', 'dividend': 0.109, 'ticker': 'ako.b', 'annual-dividend': 0.634}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/10/2016', 'dividend': 0.23, 'ticker': 'bdge', 'annual-dividend': 0.92}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.1, 'ticker': 'cmre', 'annual-dividend': 0.4}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.3, 'ticker': 'cmtl', 'annual-dividend': 1.2}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '09/23/2016', 'dividend': 0.13, 'ticker': 'cpta', 'annual-dividend': 1.56}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/03/2016', 'dividend': 0.18, 'ticker': 'ecol', 'annual-dividend': 0.72}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.105, 'ticker': 'esd', 'annual-dividend': 1.365}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/03/2016', 'dividend': 0.5, 'ticker': 'hsbc', 'annual-dividend': 2.0}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/03/2016', 'dividend': 0.19, 'ticker': 'ltc', 'annual-dividend': 2.28}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '08/15/2016', 'dividend': 0.065, 'ticker': 'mmu', 'annual-dividend': 0.845}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/11/2016', 'dividend': 0.669, 'ticker': 'pg', 'annual-dividend': 2.678}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.34, 'ticker': 'pnr', 'annual-dividend': 1.36}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '09/26/2016', 'dividend': 0.05, 'ticker': 'sm', 'annual-dividend': 0.1}, {'ex-dividend-date': '10/19/2016', 'announced-dividend-date': '10/11/2016', 'dividend': 0.42, 'ticker': 'wdfc', 'annual-dividend': 1.68}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '09/21/2016', 'dividend': 0.05, 'ticker': 'awp', 'annual-dividend': 0.6}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '09/09/2016', 'dividend': 0.39, 'ticker': 'cl', 'annual-dividend': 1.56}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '09/22/2016', 'dividend': 0.425, 'ticker': 'cvs', 'annual-dividend': 1.7}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.076, 'ticker': 'eft', 'annual-dividend': 0.912}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.084, 'ticker': 'ety', 'annual-dividend': 1.012}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.145, 'ticker': 'evt', 'annual-dividend': 1.74}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '09/27/2016', 'dividend': 0.145, 'ticker': 'hrl', 'annual-dividend': 0.58}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '09/19/2016', 'dividend': 0.031, 'ticker': 'pcf', 'annual-dividend': 0.34}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '09/19/2016', 'dividend': 0.026, 'ticker': 'ppt', 'annual-dividend': 0.312}, {'ex-dividend-date': '10/20/2016', 'announced-dividend-date': '10/10/2016', 'dividend': 0.33, 'ticker': 'tho', 'annual-dividend': 1.32}, {'ex-dividend-date': '10/21/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.125, 'ticker': 'apog', 'annual-dividend': 0.5}, {'ex-dividend-date': '10/21/2016', 'announced-dividend-date': '10/11/2016', 'dividend': 0.3, 'ticker': 'fast', 'annual-dividend': 1.2}, {'ex-dividend-date': '10/21/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.122, 'ticker': 'pba', 'annual-dividend': 1.462}, {'ex-dividend-date': '10/24/2016', 'announced-dividend-date': '09/14/2016', 'dividend': 0.8, 'ticker': 'clx', 'annual-dividend': 3.2}, {'ex-dividend-date': '10/24/2016', 'announced-dividend-date': '09/26/2016', 'dividend': 0.2, 'ticker': 'holi', 'annual-dividend': 0.2}, {'ex-dividend-date': '10/24/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.16, 'ticker': 'lnd', 'annual-dividend': 0.505}, {'ex-dividend-date': '10/24/2016', 'announced-dividend-date': '08/24/2016', 'dividend': 0.632, 'ticker': 'ry', 'annual-dividend': 2.529}, {'ex-dividend-date': '10/25/2016', 'announced-dividend-date': '09/19/2016', 'dividend': 0.37, 'ticker': 'wsm', 'annual-dividend': 1.48}, {'ex-dividend-date': '10/26/2016', 'announced-dividend-date': '10/11/2016', 'dividend': 0.01, 'ticker': 'avd', 'annual-dividend': 0.04}, {'ex-dividend-date': '10/26/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.7, 'ticker': 'gel', 'annual-dividend': 2.8}, {'ex-dividend-date': '10/26/2016', 'announced-dividend-date': '08/25/2016', 'dividend': 0.26, 'ticker': 'sig', 'annual-dividend': 1.04}, {'ex-dividend-date': '10/26/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.055, 'ticker': 'tk', 'annual-dividend': 0.22}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.12, 'ticker': 'aos', 'annual-dividend': 0.48}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '08/01/2016', 'dividend': 0.083, 'ticker': 'boxc', 'annual-dividend': 0.998}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '09/23/2016', 'dividend': 0.25, 'ticker': 'cag', 'annual-dividend': 1.0}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '09/15/2016', 'dividend': 0.344, 'ticker': 'cea', 'annual-dividend': 0.344}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/11/2016', 'dividend': 0.11, 'ticker': 'cldt', 'annual-dividend': 1.32}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '09/19/2016', 'dividend': 0.065, 'ticker': 'dnp', 'annual-dividend': 0.78}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.405, 'ticker': 'epd', 'annual-dividend': 1.62}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.294, 'ticker': 'lnt', 'annual-dividend': 1.175}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '08/09/2016', 'dividend': 0.165, 'ticker': 'ni', 'annual-dividend': 0.66}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.47, 'ticker': 'nwn', 'annual-dividend': 1.88}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/03/2016', 'dividend': 0.55, 'ticker': 'paa', 'annual-dividend': 2.2}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.413, 'ticker': 'pagp', 'annual-dividend': 0.826}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '09/21/2016', 'dividend': 0.22, 'ticker': 'pnm', 'annual-dividend': 0.88}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '08/26/2016', 'dividend': 0.083, 'ticker': 'psec', 'annual-dividend': 1.0}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '09/22/2016', 'dividend': 0.15, 'ticker': 'schl', 'annual-dividend': 0.6}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/10/2016', 'dividend': 0.113, 'ticker': 'scm', 'annual-dividend': 1.36}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.325, 'ticker': 'skt', 'annual-dividend': 1.3}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '08/02/2016', 'dividend': 0.116, 'ticker': 'stag', 'annual-dividend': 1.39}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '09/14/2016', 'dividend': 0.037, 'ticker': 'stb', 'annual-dividend': 0.44}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.262, 'ticker': 'tegp', 'annual-dividend': 1.05}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.795, 'ticker': 'tep', 'annual-dividend': 3.18}, {'ex-dividend-date': '10/27/2016', 'announced-dividend-date': '08/18/2016', 'dividend': 0.45, 'ticker': 'vrts', 'annual-dividend': 1.8}, {'ex-dividend-date': '10/28/2016', 'announced-dividend-date': '08/15/2016', 'dividend': 0.21, 'ticker': 'atlo', 'annual-dividend': 0.84}, {'ex-dividend-date': '10/28/2016', 'announced-dividend-date': '08/23/2016', 'dividend': 0.655, 'ticker': 'bmo', 'annual-dividend': 2.62}, {'ex-dividend-date': '10/28/2016', 'announced-dividend-date': '09/07/2016', 'dividend': 0.24, 'ticker': 'casy', 'annual-dividend': 0.96}, {'ex-dividend-date': '10/28/2016', 'announced-dividend-date': '08/15/2016', 'dividend': 0.684, 'ticker': 'fmx', 'annual-dividend': 2.034}, {'ex-dividend-date': '10/28/2016', 'announced-dividend-date': '09/14/2016', 'dividend': 0.08, 'ticker': 'fnhc', 'annual-dividend': 0.32}, {'ex-dividend-date': '10/28/2016', 'announced-dividend-date': '09/16/2016', 'dividend': 0.1, 'ticker': 'gt', 'annual-dividend': 0.4}, {'ex-dividend-date': '10/28/2016', 'announced-dividend-date': '07/29/2016', 'dividend': 0.51, 'ticker': 'has', 'annual-dividend': 2.04}, {'ex-dividend-date': '10/28/2016', 'announced-dividend-date': '08/09/2016', 'dividend': 0.043, 'ticker': 'lcut', 'annual-dividend': 0.17}, {'ex-dividend-date': '10/28/2016', 'announced-dividend-date': '09/22/2016', 'dividend': 0.095, 'ticker': 'wsr', 'annual-dividend': 1.14}, {'ex-dividend-date': '11/01/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.025, 'ticker': 'kbh', 'annual-dividend': 0.1}, {'ex-dividend-date': '11/01/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.095, 'ticker': 'zts', 'annual-dividend': 0.38}, {'ex-dividend-date': '11/02/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.14, 'ticker': 'tgp', 'annual-dividend': 0.56}, {'ex-dividend-date': '11/02/2016', 'announced-dividend-date': '09/09/2016', 'dividend': 0.08, 'ticker': 'tnp', 'annual-dividend': 0.32}, {'ex-dividend-date': '11/02/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.11, 'ticker': 'too', 'annual-dividend': 0.44}, {'ex-dividend-date': '11/03/2016', 'announced-dividend-date': '09/20/2016', 'dividend': 0.36, 'ticker': 'fe', 'annual-dividend': 1.44}, {'ex-dividend-date': '11/03/2016', 'announced-dividend-date': '09/16/2016', 'dividend': 0.26, 'ticker': 'intc', 'annual-dividend': 1.04}, {'ex-dividend-date': '11/03/2016', 'announced-dividend-date': '10/06/2016', 'dividend': 0.06, 'ticker': 'rell', 'annual-dividend': 0.24}, {'ex-dividend-date': '11/04/2016', 'announced-dividend-date': '09/27/2016', 'dividend': 0.059, 'ticker': 'gnl', 'annual-dividend': 0.71}, {'ex-dividend-date': '11/04/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.4, 'ticker': 'stz', 'annual-dividend': 1.6}, {'ex-dividend-date': '11/04/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.36, 'ticker': 'stz.b', 'annual-dividend': 1.44}, {'ex-dividend-date': '11/07/2016', 'announced-dividend-date': '09/30/2016', 'dividend': 0.228, 'ticker': 'artna', 'annual-dividend': 0.913}, {'ex-dividend-date': '11/08/2016', 'announced-dividend-date': '09/09/2016', 'dividend': 0.08, 'ticker': 'ahc', 'annual-dividend': 0.32}, {'ex-dividend-date': '11/08/2016', 'announced-dividend-date': '08/18/2016', 'dividend': 0.11, 'ticker': 'amswa', 'annual-dividend': 0.44}, {'ex-dividend-date': '11/08/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.1, 'ticker': 'bset', 'annual-dividend': 0.4}, {'ex-dividend-date': '11/08/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.01, 'ticker': 'gpn', 'annual-dividend': 0.04}, {'ex-dividend-date': '11/08/2016', 'announced-dividend-date': '09/08/2016', 'dividend': 0.7, 'ticker': 'hp', 'annual-dividend': 2.8}, {'ex-dividend-date': '11/08/2016', 'announced-dividend-date': '08/31/2016', 'dividend': 0.11, 'ticker': 'moco', 'annual-dividend': 0.44}, {'ex-dividend-date': '11/08/2016', 'announced-dividend-date': '09/23/2016', 'dividend': 0.3, 'ticker': 'pfe', 'annual-dividend': 1.2}, {'ex-dividend-date': '11/08/2016', 'announced-dividend-date': '09/19/2016', 'dividend': 0.26, 'ticker': 'tjx', 'annual-dividend': 1.04}, {'ex-dividend-date': '11/09/2016', 'announced-dividend-date': '09/15/2016', 'dividend': 0.002, 'ticker': 'grow', 'annual-dividend': 0.03}, {'ex-dividend-date': '11/09/2016', 'announced-dividend-date': '10/05/2016', 'dividend': 0.25, 'ticker': 'mur', 'annual-dividend': 1.0}, {'ex-dividend-date': '11/09/2016', 'announced-dividend-date': '09/16/2016', 'dividend': 0.11, 'ticker': 'wwd', 'annual-dividend': 0.44}, {'ex-dividend-date': '11/10/2016', 'announced-dividend-date': '10/11/2016', 'dividend': 0.463, 'ticker': 'ip', 'annual-dividend': 1.85}, {'ex-dividend-date': '11/10/2016', 'announced-dividend-date': '09/16/2016', 'dividend': 0.12, 'ticker': 'kr', 'annual-dividend': 0.48}, {'ex-dividend-date': '11/10/2016', 'announced-dividend-date': '10/04/2016', 'dividend': 0.16, 'ticker': 'mnr', 'annual-dividend': 0.64}, {'ex-dividend-date': '11/10/2016', 'announced-dividend-date': '09/29/2016', 'dividend': 0.45, 'ticker': 'swx', 'annual-dividend': 1.8}, {'ex-dividend-date': '11/10/2016', 'announced-dividend-date': '10/03/2016', 'dividend': 0.18, 'ticker': 'umh', 'annual-dividend': 0.72}, {'ex-dividend-date': '11/10/2016', 'announced-dividend-date': '09/01/2016', 'dividend': 0.08, 'ticker': 'xec', 'annual-dividend': 0.32}, {'ex-dividend-date': '11/14/2016', 'announced-dividend-date': '08/15/2016', 'dividend': 0.58, 'ticker': 'alv', 'annual-dividend': 2.32}, {'ex-dividend-date': '11/14/2016', 'announced-dividend-date': '09/23/2016', 'dividend': 0.29, 'ticker': 'lnn', 'annual-dividend': 1.16}, {'ex-dividend-date': '11/14/2016', 'announced-dividend-date': '09/21/2016', 'dividend': 0.6, 'ticker': 'tgt', 'annual-dividend': 2.4}, {'ex-dividend-date': '11/15/2016', 'announced-dividend-date': '09/27/2016', 'dividend': 0.9, 'ticker': 'cvgw', 'annual-dividend': 0.9}, {'ex-dividend-date': '11/15/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.135, 'ticker': 'glw', 'annual-dividend': 0.54}, {'ex-dividend-date': '11/15/2016', 'announced-dividend-date': '09/21/2016', 'dividend': 0.39, 'ticker': 'msft', 'annual-dividend': 1.56}, {'ex-dividend-date': '11/15/2016', 'announced-dividend-date': '10/07/2016', 'dividend': 0.63, 'ticker': 'psx', 'annual-dividend': 2.52}, {'ex-dividend-date': '11/16/2016', 'announced-dividend-date': '08/11/2016', 'dividend': 0.42, 'ticker': 'bg', 'annual-dividend': 1.68}, {'ex-dividend-date': '11/16/2016', 'announced-dividend-date': '09/13/2016', 'dividend': 0.24, 'ticker': 'pcar', 'annual-dividend': 0.96}]

tickers = [dividend_info['ticker'] for dividend_info in dividend_infos]

ticker_infos = ticker_scrap.get_ticker_from_yahoo(tickers)

for dividend_info in dividend_infos:
    ticker_info = ticker_infos[dividend_info['ticker']]
    if ticker_info['LastTradePriceOnly']:
        ticker_info['current_yield'] = (dividend_info['dividend'] * 100) / float(ticker_info['LastTradePriceOnly'])
    ticker_info.update(dividend_info)


sorted_by_yield = sorted(ticker_infos.values(), key=lambda ticker_info: ticker_info.get('current_yield', 0.0), reverse=True)

for ticker_info in sorted_by_yield:
    print(ticker_info)
